################# MongoDB ################# START
### Required for PlexDrive to Operate
sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 0C49F3730359A14518585931BC711F9BA15703C6

# Copy Entire String - The next line is ONE WHOLE LINE, it's wrapping
echo "deb [ arch=amd64,arm64 ] http://repo.mongodb.org/apt/ubuntu xenial/mongodb-org/3.4 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-3.4.list

sudo apt-get update
sudo apt-get install -y mongodb-org

# Enable Service (Copy and Paste All 4 Lines Below)
sudo systemctl daemon-reload
sudo systemctl enable mongod
sudo systemctl start mongod
sudo systemctl status mongod
# Press CTRL+C to escape
################# MongoDB ################# END

################# PlexDrive4 ################# START
### Required for Plex to prevent 24HR API Download Ban

# Install PlexDrive (can copy entire block)
cd /tmp
sudo wget https://github.com/dweidenfeld/plexdrive/releases/download/4.0.0/plexdrive-linux-amd64
sudo mv plexdrive-linux-amd64 plexdrive4
sudo mv plexdrive4 /usr/bin/
cd /usr/bin/
sudo chown root:root /usr/bin/plexdrive4
sudo chmod 755 /usr/bin/plexdrive4
sudo mkdir /mnt/plexdrive4 && sudo chmod 755 /mnt/plexdrive4
cd ~

# Execute PlexDrive 4; takes awhile to complete; do not shutdown ### First Time Run
sudo screen plexdrive4 --uid=1001 --gid=1001 -o allow_other -v 2 --refresh-interval=1m /mnt/plexdrive4

# Recommend you just stop here until the scan is done; then reboot, and start with the stuff below
# Press CTRL+A then C to create new terminal session to continue
# Revert to PlexDrive status; CTRL+A then 0 <---- check on it after you follow the steps below (will put a reminder)
# Once done, create this service below; I don't know what happens if you skip the stuff above and just create the service

# Creating a service for Sonnar
sudo nano /etc/systemd/system/plexdrive4.service

##### START COPY #####

[Unit]
Description=PlexDrive4 Service
After=multi-user.target

[Service]
Type=simple
ExecStart=/usr/bin/plexdrive4 --uid=1001 --gid=1001 --fuse-options=allow_other --refresh-interval=1m /mnt/plexdrive4
TimeoutStopSec=20
KillMode=process
RemainAfterExit=yes

[Install]
WantedBy=multi-user.target

##### END COPY #####
# Press CTRL+X and then Yes to save

### Start and enable the service
sudo systemctl daemon-reload
sudo systemctl enable plexdrive4.service
sudo systemctl start plexdrive4.service
sudo systemctl status plexdrive4.service
# Press CTRL + C to exit the status message
################# PlexDrive4 ################# END

################# Tips ################# END
# You should get a GREEN Light
# I would do a reboot to make sure your /mnt/plexdrive4 works! If you didn't finish the scan, you may have issues
# Tip:  What I learned is the speed is based on your HD speeds; an SSD is super fast; regular HD can take many hours :D
################# Tips ################# END
