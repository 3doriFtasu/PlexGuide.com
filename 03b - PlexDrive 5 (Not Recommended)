################# Google Drive API ################# START
### Required for both RClone & PlexDrive5 
# This part is only required if you DO NOT have your Google Drive API credentials
# http://console.developers.google.com
# Select project or create a new project
# Under Overview, Google APs, Google Apps APIs; click "Drive API", then enable
# Click "Credentails" in the left-side panel (not "Go to Credentials" which is a Wizard)
# Then "Create credentials"
# Then "OAuth client ID"
# Prompted to set OAuth consent screen product name.
# Choose application type as "other" and then click "Create"
#   If you fail to select "other", it will not work (Reported By PogMoThoin22 @ reddit)
# Will show your client ID and client secret
################# Google Drive API ################# END

################# PlexDrive5 ################# START
### Required for Plex to read without triggering 24 hour ban

sudo apt update

# Incase fuse in not installed
sudo apt install fuse

# create a temporary folder
cd /tmp
# check to for the newest update and replace link below if required: https://github.com/dweidenfeld/plexdrive/releases
sudo wget https://github.com/dweidenfeld/plexdrive/releases/download/5.0.0/plexdrive-linux-amd64

# Commands to rename and move PlexDrive5 to the correction location; sets proper permissions
sudo mv plexdrive-linux-amd64 plexdrive5
sudo mv plexdrive5 /usr/local/bin/
cd /usr/local/bin/
sudo chown root:root /usr/local/bin/plexdrive5
sudo chmod 755 /usr/local/bin/plexdrive5
sudo mkdir /mnt/plexdrive5 && sudo chmod 755 /mnt/plexdrive5
cd ~

# Execute PlexDrive 5; takes awhile to complete; do not shutdown
# The screen CMD will not work if you failed to install SCREEN
screen sudo plexdrive5 mount -v 3 -o allow_other,read_only --chunk-size=30M /mnt/plexdrive5

# Press CTRL+A then C to create new terminal session to continue
# Revert to PlexDrive status; CTRL+A 0
# If you want to see your WINDOW numbers, press CTRL+A W and look below
#   To get to any other windows, you would press CTRL+A (and the corresponding number)

### PlexDrive - RC.Local startup script
cd /opt && sudo nano plex5.sh

##### Copy #### START
#!/bin/bash
plexdrive5 mount -v 3 -o allow_other,read_only --chunk-size=30M /mnt/plexdrive5
##### Copy #### END

# Press CTRL+X; then Enter to Save. 
# Editing rc.local to boot up plexdrive5 and rclone script
cd /etc && sudo nano rc.local

# Place the lines below above "exit 0"
sh /opt/plex5.sh &
sh /opt/rclone.sh &
# Press CTRL+X and then ENTER to save

# Assign permissions so you script can execute
sudo chown root /etc/rc.local
sudo chmod 755 /etc/rc.local
sudo chmod 755 /opt/plex5.sh
sudo chown root /opt/plex5.sh
sudo /etc/init.d/rc.local start
# Do NOT reboot your system until PlexDrive is done scanning
################# PlexDrive5 ################# END
