#!/bin/bash
#
# Title:      PlexGuide (Reference Title File)
# Author(s):  Admin9705
# URL:        https://plexguide.com - http://github.pgblitz.com
# GNU:        General Public License v3.0
################################################################################

insecureskipverify = true
defaultEntryPoints = ["http", "https"]

[global]
  checkNewVersion = true
  sendAnonymousUsage = false

[log]
  level = "WARN"

[entryPoints]
  [entryPoints.web]
    address = ":80"
  [entryPoints.websecure]
    address = ":443"
  [entryPoints.postgres]
    address = ":5432"

[certificatesResolvers.letsencrypt.acme]
  email = "{{email.stdout}}"
  storage = "/etc/traefik/acme/acme.json"
  [certificatesResolvers.letsencrypt.acme.dnsChallenge]
    provider = "{{provider.stdout}}""
    delayBeforeCheck = "{{delaycheck.stdout}}"
    resolvers = ["1.1.1.1:53", "8.8.8.8:53"]

[http.routers]
  [http.routers.blog]
  rule = "Host(`{{domain.stdout}}`)"
  [http.routers.blog.tls]
    certResolver = "myresolver"

#[[acme.domains]]
#main = "{{domain.stdout}}"
#[[acme.domains]]
#main = "*.{{domain.stdout}}"

#[backends]
## Cockpit Backend
#[backends.cockpit]
#[backends.cockpit.servers.server]
#url = "https://127.0.0.1:9090"

#[frontends]
## Cockpit Frontend
#[frontends.cockpit]
#backend = "cockpit"
#passHostHeader = true
#[frontends.cockpit.routes.cockpit]
#rule = "Host:cockpit.{{domain.stdout}}"

[docker]
endpoint = "unix:///var/run/docker.sock"
domain = "{{domain.stdout}}"
watch = true
exposedbydefault = false
network = "plexguide"
