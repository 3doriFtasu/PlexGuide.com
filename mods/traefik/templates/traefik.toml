#!/bin/bash
# URL:        https://plexguide.com - http://github.pgblitz.com
# GNU:        General Public License v3.0
################################################################################

#insecureskipverify = true
#defaultEntryPoints = ["http", "https"]

#[global]
#  checkNewVersion = true
#  sendAnonymousUsage = false

[log]
  level = "WARN"

[entryPoints]
  [entryPoints.web]
    address = ":80"
  [entryPoints.websecure]
    address = ":443"
  [entryPoints.postgres]
    address = ":5432"

[certificatesResolvers.myresolver.acme]
  email = "{{email.stdout}}"
  storage = "/etc/traefik/acme/acme.json"
  [certificatesResolvers.myresolver.acme.dnsChallenge]
    provider = "{{provider.stdout}}""
    delayBeforeCheck = "{{delaycheck.stdout}}"
    resolvers = ["1.1.1.1:53", "8.8.8.8:53"]

[api]
  dashboard = true
  debug = true

[http.routers]
  [http.routers.blog]
  rule = "Host(`{{domain.stdout}}`)"
  [http.routers.blog.tls]
    certResolver = "myresolver"

#[[acme.domains]]
#main = "{{domain.stdout}}"
#[[acme.domains]]
#main = "*.{{domain.stdout}}"

[providers]
  [providers.docker]
  endpoint = "unix:///var/run/docker.sock"
  domain = "{{domain.stdout}}"
  defaultRule = "Host(`{{ normalize .Name }}.{{domain.stdout}}`)"
  watch = true
  exposedbydefault = false
  network = "plexguide"
